<%
  dates = []
  while @startDate <= Time.new(Time.new.year,12,31) do
     dates.push(@startDate += (14*24*60*60))
  end
%>

<h1><%= @budget.title %></h1>

<table class="table table-striped">

  <thead>
    <tr>
      <th>&nbsp;</th>
      <% dates.each do |date| %>
      <th><%= date.strftime("%m/%d") %></th>
      <% end %>
    </tr>
  </thead>
  <tbody>
  <tr>
    <th style="color: #ffffff; background-color: #333333;">Income</th>
    <td colspan="<%= dates.length %>" style="background-color: #333333;"> &nbsp;</td>
  </tr>
  <tr>
    <th style="color: white; background-color: #333333;">Expenses</th>
    <td colspan="<%= dates.length %>"  style="background-color: #333333;"> &nbsp;</td>
  </tr>
  <% @budget.expenses.each do |expense| %>
     <tr>
       <th><%= expense.title %></th>
       <% dates.each do |date| %>
           <td> <%= number_to_currency(expense.expense_value_by_date date)  %> </td>
       <% end %>
     </tr>
  <% end %>
  </tbody>
</table>

<div id="expenseModal" class="modal fade" style="display: none;">
    <div class="modal-header">
      <a href="" class="close" data-dismiss="modal">x</a>
      <h3>Add Expense</h3>
    </div>
    <div class="modal-body">Load expense specific form here.  This will be an ajax form.</div>
    <div class="modal-footer">
        <a href="#" class="btn btn-primary">Save Expense</a>
        <a href="#" class="btn">Cancel</a>
    </div>
</div>

<script>
  $("#expenseModal").modal({"show": false});
</script>