<%

  dates = []
  @income_totals = {}
  @variable_expense_totals = {}
  @fixed_expense_totals = {}

  while @startDate <= Time.new(Time.new.year,12,31) do
     new_date = @startDate += (14*24*60*60)
     dates.push(new_date)
     @income_totals[new_date.strftime("%m%d")] = {:total => 0}
     @variable_expense_totals[new_date.strftime("%m%d")] = {:total => 0}
     @fixed_expense_totals[new_date.strftime("%m%d")] = {:total => 0}
  end
%>

<h1><%= @budget.title %></h1>

<table class="table table-striped">

  <thead>
    <tr>
      <th>&nbsp;</th>
      <% dates.each do |date|  %>

      <th><%= date.strftime("%m/%d") %></th>
      <% end %>
    </tr>
  </thead>
  <tbody>


  <tr>
    <th style="color: #ffffff; background-color: #333333;">Income</th>
    <td colspan="<%= dates.length %>" style="background-color: #333333;"> &nbsp;</td>
  </tr>

  <tr>
    <th>Beginning Balance</th>
    <% dates.each do |income_date| %>
    <td>$0.00</td>
    <% end %>
  </tr>

 <%= render :partial => "income", :locals => {:dates => dates} %>

 <%= render :partial => "fixed_expenses", :locals => {:dates => dates} %>

<%= render :partial => "variable_expenses", :locals => {:dates => dates} %>

  </tbody>
</table>

<div id="expenseModal" class="modal fade" style="display: none;">
<div class="modal-header">
  <a href="" class="close" data-dismiss="modal">x</a>
  <h3>Add Expense</h3>
</div>
<div class="modal-body">Loading..</div>
<div class="modal-footer">
  <a href="#" class="btn btn-primary">Save</a>
  <a href="#" class="btn">Cancel</a>
</div>
</div>

<div id="incomeModal" class="modal fade" style="display: none;">
  <div class="modal-header">
    <a href="" class="close" data-dismiss="modal">x</a>
    <h3>Add Income</h3>
  </div>
  <div class="modal-body">Loading..</div>
  <div class="modal-footer">
    <a href="#" class="btn btn-primary">Save</a>
    <a href="#" class="btn">Cancel</a>
  </div>
</div>

<script>
  $("#expenseModal").modal({"show": false});
</script>