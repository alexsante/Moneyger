%h1= @budget.title
%div{:id => "budget-wrapper"}
  %table{:class => "table table-striped", :id => "budget"}
    %thead
      %tr
        %th &nbsp;
        - @periods.each do |period|
          %th.period= period.start_date.strftime("%m/%d")
      %tr{:id => "starting_balance"}
        %th Starting Balance
        - @periods.each do |period|
          %td{:id => "balance_#{period.id}", :class => "#{period.beginning_balance < 0 ? 'negative-balance': ''}"}= number_to_currency(period.beginning_balance)
      %tr
        %th{:style => "color: #ffffff; background-color: #333333;"}
          %span.section-title Income
          %a{:href => "javascript:void(0)", :class => "icon-white icon-plus-sign", :onclick => "Income.new()"}

        %td{:colspan => @periods.length, :style => "background-color: #333333;"} &nbsp;

      = render :partial => "income"
      = render :partial => "fixed_expenses"
      = render :partial => "fixed_expenses_aw"
      = render :partial => "variable_expenses"

    %tfoot
      %th{:style => "color: #ffffff; background-color: #333333;"} Remaining Balance
      - @periods.each do |period|
        %td{:id => "remaining_balance_#{period.id}",
            :style => "color: #ffffff; background-color: #333333;",
            :nowrap => true}= number_to_currency(period.ending_balance)

%div{:id => "expenseModal", :class =>"modal fade hide"}
%div{:id => "incomeModal", :class => "modal fade hide"}

:javascript
  $("#expenseModal").modal({"show": false});
- if @budget.incomes.length <= 2
  $("#incomeModal").modal({keyboard: false, backdrop: 'static', title: "Add Income"});
  $("#incomeModal").load('/incomes/new?welcome=1');
